<%- include('../partials/header') %>

<div class="container mt-5 mb-5">
    <div class="row">
        <div class="col-lg-10 offset-lg-1">
            <h1 class="mb-4">Organization Settings</h1>
            
            <div class="alert alert-info">
                <h5><i class="bi bi-info-circle me-2"></i>How to Use</h5>
                <p class="mb-0">These settings customize the appearance and behavior of the entire site for your organization. 
                   After making changes here, you should also update your <code>.env</code> file to persist these changes across restarts.</p>
            </div>

            <form method="POST" action="/admin/organization-settings" class="needs-validation">
                <!-- Organization Information -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="bi bi-building me-2"></i>Organization Information</h5>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="orgName" class="form-label">Organization Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="orgName" name="orgName" 
                                       value="<%= config.organization.name %>" required>
                                <small class="form-text text-muted">Name without city (e.g., "Chiro Vreugdeland")</small>
                            </div>
                            <div class="col-md-6">
                                <label for="orgFullName" class="form-label">Full Name with City <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="orgFullName" name="orgFullName" 
                                       value="<%= config.organization.fullName %>" required>
                                <small class="form-text text-muted">Used in titles and meta tags</small>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="orgShortName" class="form-label">Short Name for Navbar <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="orgShortName" name="orgShortName" 
                                       value="<%= config.organization.shortName %>" required>
                                <small class="form-text text-muted">E.g., "CHIRO VREUGDELAND"</small>
                            </div>
                            <div class="col-md-6">
                                <label for="orgCity" class="form-label">City <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="orgCity" name="orgCity" 
                                       value="<%= config.organization.city %>" required>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="orgRegion" class="form-label">Region/Province <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="orgRegion" name="orgRegion" 
                                       value="<%= config.organization.region %>" required>
                            </div>
                            <div class="col-md-6">
                                <label for="orgPostalCode" class="form-label">Postal Code <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="orgPostalCode" name="orgPostalCode" 
                                       value="<%= config.organization.postalCode %>" required>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="orgAddress" class="form-label">Street Address <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="orgAddress" name="orgAddress" 
                                   value="<%= config.organization.address %>" required>
                            <small class="form-text text-muted">Full street address</small>
                        </div>
                    </div>
                </div>

                <!-- Web Configuration -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="bi bi-globe me-2"></i>Web Configuration</h5>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="orgDomain" class="form-label">Domain (without www) <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="orgDomain" name="orgDomain" 
                                       value="<%= config.web.domain %>" required>
                                <small class="form-text text-muted">E.g., "example.be"</small>
                            </div>
                            <div class="col-md-6">
                                <label for="orgDomainWww" class="form-label">Domain with www <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="orgDomainWww" name="orgDomainWww" 
                                       value="<%= config.web.domainWww %>" required>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="orgBaseUrl" class="form-label">Base URL with Protocol <span class="text-danger">*</span></label>
                            <input type="url" class="form-control" id="orgBaseUrl" name="orgBaseUrl" 
                                   value="<%= config.web.baseUrl %>" required>
                            <small class="form-text text-muted">E.g., "https://www.example.be"</small>
                        </div>
                    </div>
                </div>

                <!-- Contact Information -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="bi bi-envelope me-2"></i>Contact Information</h5>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="orgEmail" class="form-label">Contact Email <span class="text-danger">*</span></label>
                                <input type="email" class="form-control" id="orgEmail" name="orgEmail" 
                                       value="<%= config.contact.email %>" required>
                                <small class="form-text text-muted">Main contact address (shown in footer)</small>
                            </div>
                            <div class="col-md-6">
                                <label for="orgNoreplyEmail" class="form-label">No-Reply Email <span class="text-danger">*</span></label>
                                <input type="email" class="form-control" id="orgNoreplyEmail" name="orgNoreplyEmail" 
                                       value="<%= config.contact.noreplyEmail %>" required>
                                <small class="form-text text-muted">For automated messages</small>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="orgEmailName" class="form-label">Email Display Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="orgEmailName" name="orgEmailName" 
                                       value="<%= config.contact.emailName %>" required>
                                <small class="form-text text-muted">Appears in "From:" line of emails</small>
                            </div>
                            <div class="col-md-6">
                                <label for="orgFacebook" class="form-label">Facebook Page Name</label>
                                <input type="text" class="form-control" id="orgFacebook" name="orgFacebook" 
                                       value="<%= config.contact.facebook %>">
                                <small class="form-text text-muted">Without "facebook.com/"</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SEO & Meta Information -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="bi bi-search me-2"></i>SEO & Meta Information</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="orgKeywords" class="form-label">Meta Keywords <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="orgKeywords" name="orgKeywords" 
                                   value="<%= config.seo.keywords %>" required>
                            <small class="form-text text-muted">Comma-separated keywords for search engines</small>
                        </div>

                        <div class="mb-3">
                            <label for="orgDefaultDesc" class="form-label">Default Meta Description <span class="text-danger">*</span></label>
                            <textarea class="form-control" id="orgDefaultDesc" name="orgDefaultDesc" 
                                      rows="2" required><%= config.seo.defaultDescription %></textarea>
                            <small class="form-text text-muted">Used as fallback description on pages (160 chars)</small>
                        </div>

                        <div class="mb-3">
                            <label for="orgTagline" class="form-label">Organization Tagline/Slogan <span class="text-danger">*</span></label>
                            <textarea class="form-control" id="orgTagline" name="orgTagline" 
                                      rows="2" required><%= config.seo.tagline %></textarea>
                            <small class="form-text text-muted">Catchphrase used on homepage</small>
                        </div>
                    </div>
                </div>

                <!-- Branding Colors -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="bi bi-palette me-2"></i>Branding Colors</h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted">Use hex color codes (e.g., #db3e41)</p>

                        <div class="row">
                            <div class="col-md-6">
                                <label for="orgPrimaryColor" class="form-label">Primary Color <span class="text-danger">*</span></label>
                                <div class="input-group mb-3">
                                    <input type="color" class="form-control form-control-color" id="orgPrimaryColor" 
                                           name="orgPrimaryColor" value="<%= config.branding.primaryColor %>" required>
                                    <input type="text" class="form-control" value="<%= config.branding.primaryColor %>" 
                                           readonly style="flex: 0 0 100px;">
                                </div>
                                <small class="form-text text-muted">Used for buttons, highlights</small>
                            </div>

                            <div class="col-md-6">
                                <label for="orgSecondaryColor" class="form-label">Secondary Color <span class="text-danger">*</span></label>
                                <div class="input-group mb-3">
                                    <input type="color" class="form-control form-control-color" id="orgSecondaryColor" 
                                           name="orgSecondaryColor" value="<%= config.branding.secondaryColor %>" required>
                                    <input type="text" class="form-control" value="<%= config.branding.secondaryColor %>" 
                                           readonly style="flex: 0 0 100px;">
                                </div>
                                <small class="form-text text-muted">Used for accents</small>
                            </div>

                            <div class="col-md-6">
                                <label for="orgBgColor" class="form-label">Background Color <span class="text-danger">*</span></label>
                                <div class="input-group mb-3">
                                    <input type="color" class="form-control form-control-color" id="orgBgColor" 
                                           name="orgBgColor" value="<%= config.branding.backgroundColor %>" required>
                                    <input type="text" class="form-control" value="<%= config.branding.backgroundColor %>" 
                                           readonly style="flex: 0 0 100px;">
                                </div>
                                <small class="form-text text-muted">PWA background color</small>
                            </div>

                            <div class="col-md-6">
                                <label for="orgThemeColor" class="form-label">Theme Color <span class="text-danger">*</span></label>
                                <div class="input-group mb-3">
                                    <input type="color" class="form-control form-control-color" id="orgThemeColor" 
                                           name="orgThemeColor" value="<%= config.branding.themeColor %>" required>
                                    <input type="text" class="form-control" value="<%= config.branding.themeColor %>" 
                                           readonly style="flex: 0 0 100px;">
                                </div>
                                <small class="form-text text-muted">Browser UI color</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Legal Information -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="bi bi-file-text me-2"></i>Legal Information</h5>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="orgLegalName" class="form-label">Legal Entity Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="orgLegalName" name="orgLegalName" 
                                       value="<%= config.legal.legalName %>" required>
                                <small class="form-text text-muted">For legal documents and privacy notices</small>
                            </div>
                            <div class="col-md-6">
                                <label for="orgFoundingYear" class="form-label">Founding Year <span class="text-danger">*</span></label>
                                <input type="number" class="form-control" id="orgFoundingYear" name="orgFoundingYear" 
                                       value="<%= config.legal.foundingYear %>" required>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="orgVatNumber" class="form-label">VAT Number (if applicable)</label>
                            <input type="text" class="form-control" id="orgVatNumber" name="orgVatNumber" 
                                   value="<%= config.legal.vatNumber %>">
                        </div>
                    </div>
                </div>

                <!-- Save Button -->
                <div class="mb-4">
                    <button type="submit" class="btn btn-success btn-lg">
                        <i class="bi bi-check-circle me-2"></i>Save Organization Settings
                    </button>
                    <a href="/admin" class="btn btn-secondary btn-lg">
                        <i class="bi bi-x-circle me-2"></i>Cancel
                    </a>
                </div>

                <div class="alert alert-warning">
                    <h5><i class="bi bi-exclamation-triangle me-2"></i>Important Note</h5>
                    <p class="mb-0">
                        These changes apply to the running application. To persist them across restarts, 
                        you must also update your <code>.env</code> file with the same values. 
                        For production, consider using environment variables managed by your hosting provider.
                    </p>
                </div>
            </form>
        </div>
    </div>
</div>

<%- include('../partials/footer') %>
